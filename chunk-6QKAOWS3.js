import{a as j}from"./chunk-XN75RPFP.js";import{l as V}from"./chunk-DSZGJGO5.js";import{a as R,b as P,c as T,d as N,e as M,f as v,h as x,j as D,k as G,n as I}from"./chunk-BPOH3U2V.js";import{h as E}from"./chunk-3YXHMWOF.js";import"./chunk-UQV3BW2P.js";import{Ab as m,Hb as y,Kb as _,Na as l,Oa as w,aa as h,bb as u,db as f,hb as p,kc as b,lb as i,mb as s,nb as c,sb as C,tb as S}from"./chunk-BYE5LYHS.js";var q=(t,d)=>({" is-valid":t,"is-invalid":d});function A(t,d){t&1&&(i(0,"p",14),m(1,"password is require"),s())}function k(t,d){t&1&&(i(0,"p",14),m(1,"password must be at least 6"),s())}function B(t,d){if(t&1&&(i(0,"div",9),u(1,A,2,0,"p",14)(2,k,2,0),s()),t&2){let r,n=S();l(),p(1,(r=n.resetForm.get("password"))!=null&&r.getError("required")?1:(r=n.resetForm.get("password"))!=null&&r.getError("pattern")?2:-1)}}function O(t,d){t&1&&(i(0,"div",9)(1,"p",14),m(2,"Confirm password is not correct"),s()())}function $(t,d){t&1&&c(0,"i",13)}var W=(()=>{class t{constructor(r,n,e){this._ForgetPasswordService=r,this._Router=n,this._ToastrService=e,this.loding=!1,this.resetForm=new M({password:new v(null,[P.required,P.pattern(/^\w{6,}$/)]),rePassword:new v(null)},this.confirmPassword)}ngOnInit(){this._ForgetPasswordService.stateRestPage||this._Router.navigate(["/login"])}confirmPassword(r){return r.get("password")?.value===r.get("rePassword")?.value?null:{missMatch:!0}}supmitData(){this.resetForm.valid?(console.log(this.resetForm),this.loding=!0,this._ForgetPasswordService.resetPassword(this._ForgetPasswordService.email.getValue(),this.resetForm.value.password).subscribe({next:r=>{console.log(r.message),this._ToastrService.success("","fresh cart",{closeButton:!0,progressBar:!0}),this.loding=!1,console.log(r),setInterval(()=>{this._Router.navigate(["/login"])},400)}})):(this.resetForm.setErrors({missMatch:!0}),this.resetForm.markAllAsTouched())}ngOnDestroy(){this._ForgetPasswordService.stateRestPage.next(!1)}static{this.\u0275fac=function(n){return new(n||t)(w(j),w(E),w(V))}}static{this.\u0275cmp=h({type:t,selectors:[["app-rest-password-page"]],standalone:!0,features:[y],decls:21,vars:12,consts:[[1,"container-fluid","container-md"],[1,"text-main","user-select-none","text-center","display-5","mt-4","mb-2","fw-light","main-logo-text"],[1,"fa-solid","fa-key"],[1,"text-main","user-select-none","text-center","display-5","mt-1","mb-4","fw-light","main-logo-text"],[1,"container"],[1,"reset-password-form","mx-auto","mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","password","placeholder","enter password","formControlName","password",1,"form-control","py-2",3,"ngClass"],[1,"alert","alert-warning","my-2","p-2","f5-6","fw-bold","rounded","rounded-3"],["for","rePassword",1,"mb-1"],["type","password","placeholder","enter rePassword","id","rePassword","formControlName","rePassword",1,"form-control","py-2",3,"ngClass"],["type","submit",1,"btn","btn-primary","w-100"],[1,"fa-solid","fa-spinner","fa-spin"],[1,"m-0"]],template:function(n,e){if(n&1&&(i(0,"section")(1,"div",0)(2,"p",1),c(3,"i",2),s(),i(4,"p",3),m(5,"Reset Password"),s(),i(6,"div",4)(7,"form",5),C("ngSubmit",function(){return e.supmitData()}),i(8,"div",6)(9,"label",7),m(10,"New Password"),s(),c(11,"input",8),u(12,B,3,1,"div",9),s(),i(13,"div",6)(14,"label",10),m(15,"rePassword:"),s(),c(16,"input",11),u(17,O,3,0,"div",9),s(),i(18,"button",12),m(19,"Reset Password "),u(20,$,1,0,"i",13),s()()()()()),n&2){let o,g,a,F;l(7),f("formGroup",e.resetForm),l(4),f("ngClass",_(6,q,!((o=e.resetForm.get("password"))!=null&&o.errors)&&(((o=e.resetForm.get("password"))==null?null:o.touched)||((o=e.resetForm.get("password"))==null?null:o.dirty)),((o=e.resetForm.get("password"))==null?null:o.errors)&&(((o=e.resetForm.get("password"))==null?null:o.touched)||((o=e.resetForm.get("password"))==null?null:o.dirty)))),l(),p(12,(g=e.resetForm.get("password"))!=null&&g.errors&&((g=e.resetForm.get("password"))!=null&&g.touched)?12:-1),l(4),f("ngClass",_(9,q,!e.resetForm.getError("missMatch")&&(((a=e.resetForm.get("rePassword"))==null?null:a.touched)||((a=e.resetForm.get("rePassword"))==null?null:a.dirty)),e.resetForm.getError("missMatch")&&(((a=e.resetForm.get("rePassword"))==null?null:a.touched)||((a=e.resetForm.get("rePassword"))==null?null:a.dirty)))),l(),p(17,e.resetForm.getError("missMatch")&&((F=e.resetForm.get("rePassword"))!=null&&F.touched)?17:-1),l(3),p(20,e.loding?20:-1)}},dependencies:[b,I,x,R,T,N,D,G]})}}return t})();export{W as RestPasswordPageComponent};
